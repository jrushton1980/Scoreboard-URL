<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Scoreboard Control</title>
<style>
body { background:#111; color:#fff; font-family:Arial,sans-serif; margin:0; padding:10px; display:flex; flex-direction:column; align-items:center; }
.scoreboard { width:95%; background:#1e1e1e; border-radius:12px; padding:10px; margin-bottom:12px; text-align:center; }
.team-row { display:flex; justify-content:space-between; font-weight:bold; font-size:18px; }
.score-row { display:flex; justify-content:space-between; font-size:36px; margin-top:6px; }
.shots-row { display:flex; justify-content:space-between; font-size:16px; margin-top:4px; opacity:0.85; }
.clock-section { display:flex; justify-content:space-between; align-items:center; width:95%; background:#1d1d1d; border-radius:12px; padding:10px; margin-bottom:12px; }
.clock-section button { flex:1; font-size:18px; padding:14px 0; margin:0 4px; border-radius:8px; border:none; background-color:#333; color:#fff; cursor:pointer; }
#timer { font-size:28px; font-weight:bold; text-align:center; } #period { font-size:18px; text-align:center; margin-top:2px; }
#startStopBtn { width:95%; font-size:28px; padding:40px 0; border-radius:12px; border:none; color:white; background-color:#28a745; margin-bottom:16px; }
.team-controls { display:flex; justify-content:space-between; width:95%; gap:10px; }
.team-column { flex:1; display:flex; flex-direction:column; gap:6px; }
.team-column button.plus { width:100%; font-size:24px; padding:40px 0; border-radius:10px; border:none; background-color:#555; color:#fff; }
.team-column button.minus { width:100%; font-size:24px; padding:12px 0; border-radius:10px; border:none; background-color:#777; color:#fff; }
</style>
</head>
<body>
<div class="scoreboard">
  <div class="team-row">
    <span id="teamAName">Team A</span>
    <span id="teamBName">Team B</span>
  </div>
  <div class="score-row">
    <span id="teamAScore">0</span><span style="opacity:0.8;">-</span><span id="teamBScore">0</span>
  </div>
  <div class="shots-row">
    <span id="teamAShots">Shots: 0</span>
    <span id="teamBShots">Shots: 0</span>
  </div>
</div>

<div class="clock-section">
  <button onclick="setPeriod()">Period</button>
  <div style="flex:2;"><div id="timer">20:00</div><div id="period">Period 1</div></div>
  <button onclick="setClock()">Clock</button>
</div>
<button id="startStopBtn" onclick="toggleClock()">Start</button>

<div class="team-controls">
  <div class="team-column">
    <button class="plus" onclick="updateShots('A',1)">+1 Shot</button>
    <button class="minus" onclick="updateShots('A',-1)">-1 Shot</button>
    <button class="plus" onclick="updateScore('A',1)">+1 Goal</button>
    <button class="minus" onclick="updateScore('A',-1)">-1 Goal</button>
  </div>
  <div class="team-column">
    <button class="plus" onclick="updateShots('B',1)">+1 Shot</button>
    <button class="minus" onclick="updateShots('B',-1)">-1 Shot</button>
    <button class="plus" onclick="updateScore('B',1)">+1 Goal</button>
    <button class="minus" onclick="updateScore('B',-1)">-1 Goal</button>
  </div>
</div>

<script>
const DATA_URL = "https://script.google.com/macros/s/AKfycbytIuXy17Y27QTgQdXsFVUeAKKGQJr8q588j3cVWU5qPZ6RzrobufWA-LZx2gJgzz--/exec";

async function pushUpdate(payload){
  try{
    await fetch(DATA_URL,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify(payload)
    });
  } catch(err){ console.error(err); }
}

// Clock
let timerSeconds = 20*60;
let running = false;
let period = 1;

function formatTime(sec){ const m=Math.floor(sec/60); const s=sec%60; return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`; }
function updateTimerDisplay(){ document.getElementById('timer').textContent=formatTime(timerSeconds); document.getElementById('period').textContent=`Period ${period}`; }

function toggleClock(){ running = !running; pushUpdate({Running: running}); }

// Period / Clock set
function setPeriod(){ const val=parseInt(prompt("Enter Period:")); if(!isNaN(val)&&val>0){ period=val; updateTimerDisplay(); pushUpdate({Period:period}); } }
function setClock(){ const input=prompt("Enter time (MM:SS):"); if(input && /^\d{1,2}:\d{2}$/.test(input)){ const [m,s]=input.split(':').map(Number); timerSeconds=m*60+s; updateTimerDisplay(); pushUpdate({TimerSeconds:timerSeconds}); } }

// Score/Shots
function updateScore(team,change){ const el=document.getElementById(`team${team}Score`); const newVal=Math.max(0,parseInt(el.textContent)+change); el.textContent=newVal; pushUpdate({[`team${team}Score`]:newVal}); }
function updateShots(team,change){ const el=document.getElementById(`team${team}Shots`); const cur=parseInt(el.textContent.replace('Shots:','')||0); const newVal=Math.max(0,cur+change); el.textContent=`Shots: ${newVal}`; pushUpdate({[`team${team}Shots`]:newVal}); }
</script>
</body>
</html>
